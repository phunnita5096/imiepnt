<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>Sphere + dat.GUI (three.js r128)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>html,body{height:100%;margin:0} canvas{display:block}</style>

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  
  <!-- dat.GUI -->
  <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.min.js"></script>
</head>
<body>
<script>
  // Scene / Camera / Renderer
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x000000);

  const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 100);
  camera.position.set(0, 1, 3);

  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(innerWidth, innerHeight);
  renderer.outputEncoding = THREE.sRGBEncoding;
  document.body.appendChild(renderer.domElement);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);

  // ðŸ”¹ Environment map (CubeTexture)
  const cubeUrls = [
    'https://threejs.org/examples/textures/cube/Bridge2/posx.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/negx.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/posy.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/negy.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/posz.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/negz.jpg'
  ];
  const envMap = new THREE.CubeTextureLoader().load(cubeUrls);
  envMap.encoding = THREE.sRGBEncoding;
  scene.environment = envMap;

  // Light
  const light = new THREE.DirectionalLight(0xffffff, 1.0);
  light.position.set(3, 5, 2);
  scene.add(light);

  // Geometry + Material
  const geo = new THREE.SphereBufferGeometry(0.7 , 32, 32);
  const mat = new THREE.MeshStandardMaterial({
    color: 0xaaffaa,
    metalness: 0.9,
    roughness: 0.1
  });
  const sphere = new THREE.Mesh(geo, mat);
  scene.add(sphere);

  // ðŸ”¹ dat.GUI controls
  const gui = new dat.GUI();
  const matFolder = gui.addFolder("Material");
  matFolder.addColor(mat, "color").name("Color");
  matFolder.add(mat, "metalness", 0, 1).step(0.01);
  matFolder.add(mat, "roughness", 0, 1).step(0.01);
  matFolder.open();

  const lightFolder = gui.addFolder("Light");
  lightFolder.add(light, "intensity", 0, 2).step(0.01);
  lightFolder.add(light.position, "x", -10, 10);
  lightFolder.add(light.position, "y", -10, 10);
  lightFolder.add(light.position, "z", -10, 10);
  lightFolder.open();

  // Resize
  addEventListener('resize', () => {
    camera.aspect = innerWidth / innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth, innerHeight);
  });

  // Render loop
  (function loop(){
    sphere.rotation.x += 0.01;
    sphere.rotation.y += 0.015;
    renderer.render(scene, camera);
    requestAnimationFrame(loop);
  })();
</script>
</body>
</html>
